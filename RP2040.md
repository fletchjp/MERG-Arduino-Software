# RP2040

This branch is to work with files for the Arduino NANO RP2040 Connect boards using the Arduino-pico system

## Introduction

These are very new boards and the documentation for them is still being developed.

The boards work at 3.3V which presents some challenges compared to the previous work with other Arduino boards.

## Simple examples

I am building simple examples to explore the capabilities of the RP2040.

## IoAbstraction examples

I have built the simple blink example for IoAbstraction and a second version with some Serial output.

There is a problem that the WIRE_BUFFER_SIZE gets defined both in Wire.h and EepromAbstractionWire .h in IoAbstraction.

I have reported this problem to IoAbstraction.

## CBUS examples

I have also a number of examples exploring connecting to CBUS.

I plan to connect to CBUS using a MCP2515 unit. As this is a 5V unit and the RP2040 is 3.3V I need connecting hardware.

I am using the Streaming library for output to the Serial port. This enables me to easily convert use of cout as it has most of the features used there.

## C++17 available

I have made a lot of progress towards having a working codes where I can take advantage of the GCC 10 with C++17 which is available.

In some cases I will be able to adapt previous codes.

## Boost examples

I am converting some of the examples I developed for the Arduino DUE using Boost 1.66.0. The STL in the example names comes from the situation on the DUE where I have a separate STL library which is not needed on the RP2040.

The library works well with the GCC 10 available. It is a large library and takes some time to copy.

One library which is missing is Boost HOF which only made it into 1.67.0. I can use a previous version called FIT which I will need to supply outside Boost.

I have a copy of Boost 1.67.0 and other releases and could attempt to add it in. I also have some copies of FIT.

### ArduinoRP2040STLBind

This example uses standard library and Boost headers to set up deletion from a list of strings, using either STL directly or Boost bind.

I now have a version of this which uses only std and not boost, developed when I had no access to the Boost libraries.

I am adding to this some examples of C++17 features which I have not used before.

I needed to put in flashing the LED to get it to work for a reason I do not understand.

### ArduinoRP2040STLPhoenix

I have extended the previous example to include two more cases using Boost Phoenix for comparison.

The only new problem was caused by the failure of boost/phoenix/core/debug.hpp to compile I think because it uses the C++ iostream header.

I have conditionally removed it from boost/phoenix/core.hpp and the example runs without it.

### ArduinoRP2040STLPhoenixMp11

Extended from the previous example to start some experiments with mp11.

I have now added a lot more examples.

There are several more files which expand to the work I did for the extensions to Phoenix Lazy (see below).

I need to carefully distinguish between cases which use what is in Boost from the extensions.

I also have the problem that Boost 1.66.0 has an early version of mp11 which has evolved a lot since then. Most of the changes are additions. There is one change which affects my codes - mp_invoke has become mp_invoke_q.

### ArduinoRP2040STLPhoenixCallable

Experiments using Boost callable traits.

### ArduinoRP2040STLPhoenixDyno

Extend callable traits example to include Dyno library.

To get this to work I have had to edit the **platform.txt** file to delete **-fno_rtti** so that **typeid(T)** will work.

I have made a lot of progress with this code and it now includes a number of further examples taken from the work on the GitHub site.

I have also found out how to work with a default concept map and how to override it in a special case.

### ArduinoRP2040BoostFunction

This example develops the use of Boost Function to access functions including an infix operator from BoostFC++.

I have added an example of boost::bind to this case.

### ArduinoRP2040BoostFunctionLazy

Development of the previous example with Phoenix lazy examples added.

I have added a lot of the examples. One does not work - phx::min clashes with min as defined in Streaming.

I am also looking at experimenting with std::decay<T>.

### ArduinoRP2040LazyPrelude

I have found an extended set of my routines for Phoenix Lazy which never made it into Boost.

I have now made them into a library called LazyPrelude. They optionally make use of MP11.

This example now uses them in preference to the versions in Boost Phoenix.

## FC++ Examples

I have brought in two existing examples **DUEFCPP** and **DUEMONAD**.

These examples use FC++ instead of BoostFC++ as there is much more done there.

I have made an Arduino library called **fcpp** which will run with these examples instead of them having their own copies.

### ArduinoRP2040FCPP

This is renamed from the existing examples **DUEFCPP**

### ArduinoRP2040MONAD
 
This is renamed from the existing examples **DUEMONAD**



